"use strict";(self.webpackChunk_feature_sliced_documentation=self.webpackChunk_feature_sliced_documentation||[]).push([[4461],{1796:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var n=t(1527),s=t(6736);const a={sidebar_position:2},r="Tutorial",l={id:"get-started/tutorial",title:"Tutorial",description:"Part 1. On paper",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/get-started/tutorial.md",sourceDirName:"get-started",slug:"/get-started/tutorial",permalink:"/docs/get-started/tutorial",draft:!1,unlisted:!1,editUrl:"https://github.com/feature-sliced/documentation/edit/master/i18n/en/docusaurus-plugin-content-docs/current/get-started/tutorial.md",tags:[],version:"current",lastUpdatedAt:1708894587,formattedLastUpdatedAt:"Feb 25, 2024",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"getstartedSidebar",previous:{title:"Overview",permalink:"/docs/get-started/overview"},next:{title:"FAQ",permalink:"/docs/get-started/faq"}},o={},d=[{value:"Part 1. On paper",id:"part-1-on-paper",level:2},{value:"Start by listing the pages",id:"start-by-listing-the-pages",level:3},{value:"Close look at the feed",id:"close-look-at-the-feed",level:3},{value:"List of tags",id:"list-of-tags",level:4},{value:"Articles",id:"articles",level:4},{value:"Reuse generic code",id:"reuse-generic-code",level:3},{value:"Define a strict public API",id:"define-a-strict-public-api",level:3},{value:"Large reused blocks in the UI",id:"large-reused-blocks-in-the-ui",level:3},{value:"Close look at a page with a form",id:"close-look-at-a-page-with-a-form",level:3},{value:"Summary",id:"summary",level:3}];function c(e){const i={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.ah)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h1,{id:"tutorial",children:"Tutorial"}),"\n",(0,n.jsx)(i.h2,{id:"part-1-on-paper",children:"Part 1. On paper"}),"\n",(0,n.jsxs)(i.p,{children:["This tutorial will examine the Real World App, also known as Conduit. Conduit is a basic ",(0,n.jsx)(i.a,{href:"https://medium.com/",children:"Medium"})," clone \u2014 it lets you read and write articles as well as comment on the articles of others."]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Conduit home page",src:t(5768).Z+"",width:"2880",height:"1504"})}),"\n",(0,n.jsxs)(i.p,{children:["This is a pretty small application, so we will keep it simple and avoid excessive decomposition. It\u2019s highly likely that the entire app will fit into just three layers: ",(0,n.jsx)(i.strong,{children:"App"}),", ",(0,n.jsx)(i.strong,{children:"Pages"}),", and ",(0,n.jsx)(i.strong,{children:"Shared"}),". If not, we will introduce additional layers as we go. Ready?"]}),"\n",(0,n.jsx)(i.h3,{id:"start-by-listing-the-pages",children:"Start by listing the pages"}),"\n",(0,n.jsx)(i.p,{children:"If we look at the screenshot above, we can assume at least the following pages:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Home (article feed)"}),"\n",(0,n.jsx)(i.li,{children:"Sign in and sign up"}),"\n",(0,n.jsx)(i.li,{children:"Article reader"}),"\n",(0,n.jsx)(i.li,{children:"Article editor"}),"\n",(0,n.jsx)(i.li,{children:"User profile viewer"}),"\n",(0,n.jsx)(i.li,{children:"User profile editor (user settings)"}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["Every one of these pages will become its own ",(0,n.jsx)(i.em,{children:"slice"})," on the Pages ",(0,n.jsx)(i.em,{children:"layer"}),". Recall from the overview that slices are simply folders inside of layers and layers are simply folders with predefined names like ",(0,n.jsx)(i.code,{children:"pages"}),"."]}),"\n",(0,n.jsx)(i.p,{children:"As such, our Pages folder will look like this:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"\ud83d\udcc2 pages/\n  \ud83d\udcc1 feed/\n  \ud83d\udcc1 sign-in/\n  \ud83d\udcc1 article-read/\n  \ud83d\udcc1 article-edit/\n  \ud83d\udcc1 profile/\n  \ud83d\udcc1 settings/\n"})}),"\n",(0,n.jsxs)(i.p,{children:["The key difference of Feature-Sliced Design from an unregulated code structure is that pages cannot reference each other. That is, one page cannot import code from another page. This is due to the ",(0,n.jsx)(i.strong,{children:"import rule on layers"}),":"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.em,{children:"A module in a slice can only import other slices when they are located on layers strictly below."})}),"\n",(0,n.jsx)(i.p,{children:"In this case, a page is a slice, so modules (files) inside this page can only reference code from layers below, not from the same layer, Pages."}),"\n",(0,n.jsx)(i.h3,{id:"close-look-at-the-feed",children:"Close look at the feed"}),"\n",(0,n.jsxs)("figure",{children:[(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Anonymous user\u2019s perspective",src:t(5768).Z+"",width:"2880",height:"1504"})}),(0,n.jsx)("figcaption",{children:(0,n.jsx)(i.p,{children:(0,n.jsx)(i.em,{children:"Anonymous user\u2019s perspective"})})})]}),"\n",(0,n.jsxs)("figure",{children:[(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Authenticated user\u2019s perspective",src:t(7035).Z+"",width:"2880",height:"1504"})}),(0,n.jsx)("figcaption",{children:(0,n.jsx)(i.p,{children:(0,n.jsx)(i.em,{children:"Authenticated user\u2019s perspective"})})})]}),"\n",(0,n.jsx)(i.p,{children:"There are three dynamic areas on the feed page:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"Sign-in links with an indication if you are signed in"}),"\n",(0,n.jsx)(i.li,{children:"List of tags that triggers filtering in the feed"}),"\n",(0,n.jsx)(i.li,{children:"One/two feeds of articles, each article with a like button"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"The sign-in links are a part of a header that is common to all pages, we will revisit it separately."}),"\n",(0,n.jsx)(i.h4,{id:"list-of-tags",children:"List of tags"}),"\n",(0,n.jsxs)(i.p,{children:["To build the list of tags, we need to fetch the available tags, render each tag as a chip, and store the selected tags in a client-side storage. These operations fall into categories \u201cAPI interaction\u201d, \u201cuser interface\u201d, and \u201cstorage\u201d, respectively. In Feature-Sliced Design, code is separated by purpose using ",(0,n.jsx)(i.em,{children:"segments"}),". Segments are folders in slices, and they can have arbitrary names that describe the purpose, but some purposes are so common that there\u2019s a convention for certain segment names:"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"api/"})," for backend interactions"]}),"\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"ui/"})," for code that handles rendering and appearance"]}),"\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"model/"})," for storage and business logic"]}),"\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"config/"})," for feature flags, environment variables and other forms of configuration"]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["We will place code that fetches tags into ",(0,n.jsx)(i.code,{children:"api"}),", the tag component into ",(0,n.jsx)(i.code,{children:"ui"}),", and the storage interaction into ",(0,n.jsx)(i.code,{children:"model"}),"."]}),"\n",(0,n.jsx)(i.h4,{id:"articles",children:"Articles"}),"\n",(0,n.jsx)(i.p,{children:"Using the same grouping principles, we can decompose the feed of articles into the same three segments:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"api/"}),": fetch paginated articles with like count; like an article"]}),"\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"ui/"}),":","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"tab list that can render an extra tab if a tag is selected"}),"\n",(0,n.jsx)(i.li,{children:"individual article"}),"\n",(0,n.jsx)(i.li,{children:"functional pagination"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"model/"}),": client-side storage of the currently loaded articles and current page (if needed)"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"reuse-generic-code",children:"Reuse generic code"}),"\n",(0,n.jsxs)(i.p,{children:["Most pages are very different in intent, but certain things stay the same across the entire app \u2014 for example, the UI kit that conforms to the design language, or the convention on the backend that everything is done with a REST API with the same authentication method. Since slices are meant to be isolated, code reuse is facilitated by a lower layer, ",(0,n.jsx)(i.strong,{children:"Shared"}),"."]}),"\n",(0,n.jsx)(i.p,{children:"Shared is different from other layers in the sense that it contains segments, not slices. In this way, the Shared layer can be thought of as a hybrid between a layer and a slice."}),"\n",(0,n.jsx)(i.p,{children:"Usually, the code in Shared is not planned ahead of time, but rather extracted during development, because only during development does it become clear which parts of code are actually shared. However, it\u2019s still helpful to keep a mental note of what kind of code naturally belongs in Shared:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"ui/"})," \u2014 the UI kit, pure appearance, no business logic. For example, buttons, modal dialogs, form inputs."]}),"\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"api/"})," \u2014 convenience wrappers around request making primitives (like ",(0,n.jsx)(i.code,{children:"fetch()"})," on the Web) and, optionally, functions for triggering particular requests according to the backend specification."]}),"\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"config/"})," \u2014 parsing environment variables"]}),"\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"i18n/"})," \u2014 configuration of language support"]}),"\n",(0,n.jsxs)(i.li,{children:["\ud83d\udcc2\xa0",(0,n.jsx)(i.code,{children:"router/"})," \u2014 routing primitives and route constants"]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["Those are just a few examples of segment names in Shared, but you can omit any of them or create your own. The only important thing to remember when creating new segments is that segment names should describe ",(0,n.jsx)(i.strong,{children:"purpose (the why), not essence (the what)"}),". Names like \u201ccomponents\u201d, \u201chooks\u201d, \u201cmodals\u201d ",(0,n.jsx)(i.em,{children:"should not"})," be used because they describe what these files are, but don\u2019t help to navigate the code inside. This requires people on the team to dig through every file in such folders and also keeps unrelated code close, which leads to broad areas of code being affected by refactoring and thus makes code review and testing harder."]}),"\n",(0,n.jsx)(i.h3,{id:"define-a-strict-public-api",children:"Define a strict public API"}),"\n",(0,n.jsxs)(i.p,{children:["In the context of Feature-Sliced Design, the term ",(0,n.jsx)(i.em,{children:"public API"})," refers to a slice or segment declaring what can be imported from it by other modules in the project. For example, in JavaScript that can be an ",(0,n.jsx)(i.code,{children:"index.js"})," file re-exporting objects from other files in the slice. This enables freedom in refactoring code inside a slice as long as the contract with the outside world (i.e. the public API) stays the same."]}),"\n",(0,n.jsx)(i.p,{children:"For the Shared layer that has no slices, it\u2019s usually more convenient to define a separate public API for each segment as opposed to defining one single index of everything in Shared. This keeps imports from Shared naturally organized by intent. For other layers that have slices, the opposite is true \u2014 it\u2019s usually more practical to define one index per slice and let the slice decide its own set of segments that is unknown to the outside world because other layers usually have a lot less exports."}),"\n",(0,n.jsx)(i.p,{children:"Our slices/segments will appear to each other as follows:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-jsx",children:"\ud83d\udcc2 pages/\n  \ud83d\udcc2 feed/\n    \ud83d\udcc4 index\n  \ud83d\udcc2 sign-in/\n    \ud83d\udcc4 index\n  \ud83d\udcc2 article-read/\n    \ud83d\udcc4 index\n  \ud83d\udcc1 \u2026\n\ud83d\udcc2 shared/\n  \ud83d\udcc2 ui/\n    \ud83d\udcc4 index\n  \ud83d\udcc2 api/\n    \ud83d\udcc4 index\n  \ud83d\udcc1 \u2026\n"})}),"\n",(0,n.jsxs)(i.p,{children:["Whatever is inside folders like ",(0,n.jsx)(i.code,{children:"pages/feed"})," or ",(0,n.jsx)(i.code,{children:"shared/ui"})," is only known to those folders, and other files should not rely on the internal structure of these folders."]}),"\n",(0,n.jsx)(i.h3,{id:"large-reused-blocks-in-the-ui",children:"Large reused blocks in the UI"}),"\n",(0,n.jsx)(i.p,{children:"Earlier we made a note to revisit the header that appears on every page. Rebuilding it from scratch on every page would be impractical, so it\u2019s only natural to want to reuse it. We already have Shared to facilitate code reuse, however, there\u2019s a caveat to putting large blocks of UI in Shared \u2014 the Shared layer is not supposed to know about any of the layers above."}),"\n",(0,n.jsx)(i.p,{children:"Between Shared and Pages there are three other layers: Entities, Features, and Widgets.  Some projects may have something in those layers that they need in a large reusable block, and that means we can\u2019t put that reusable block in Shared, or else it would be importing from upper layers, which is prohibited. That\u2019s where the Widgets layer comes in. It is located above Shared, Entities, and Features, so it can use them all."}),"\n",(0,n.jsxs)(i.p,{children:["In our case, the header is very simple \u2014 it\u2019s a static logo and top-level navigation. The navigation needs to make a request to the API to determine if the user is currently logged in or not, but that can be handled by a simple import from the ",(0,n.jsx)(i.code,{children:"api"})," segment. Therefore, we will keep our header in Shared."]}),"\n",(0,n.jsx)(i.h3,{id:"close-look-at-a-page-with-a-form",children:"Close look at a page with a form"}),"\n",(0,n.jsx)(i.p,{children:"Let\u2019s also examine a page that\u2019s intended for editing, not reading. For example, the article writer:"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Conduit post editor",src:t(8002).Z+"",width:"2880",height:"1200"})}),"\n",(0,n.jsx)(i.p,{children:"It looks trivial, but contains several aspects of application development that we haven\u2019t explored yet \u2014 form validation, error states, and data persistence."}),"\n",(0,n.jsxs)(i.p,{children:["If we were to build this page, we would grab some inputs and buttons from Shared and put together a form in the ",(0,n.jsx)(i.code,{children:"ui"})," segment of this page. Then, in the ",(0,n.jsx)(i.code,{children:"api"})," segment, we would define a mutation request to create the article on the backend."]}),"\n",(0,n.jsxs)(i.p,{children:["To validate the request before sending, we need a validation schema, and a good place for it is the ",(0,n.jsx)(i.code,{children:"model"})," segment, since it\u2019s the data model. There we will produce error messages and display them using another component in the ",(0,n.jsx)(i.code,{children:"ui"})," segment."]}),"\n",(0,n.jsxs)(i.p,{children:["To improve user experience, we could also persist the inputs to prevent accidental data loss. This is also a job of the ",(0,n.jsx)(i.code,{children:"model"})," segment."]}),"\n",(0,n.jsx)(i.h3,{id:"summary",children:"Summary"}),"\n",(0,n.jsx)(i.p,{children:"We have examined several pages and outlined a preliminary structure for our application:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["Shared layer","\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"ui"}),"  will contain our reusable UI kit"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"api"}),"  will contain our primitive interactions with the backend"]}),"\n",(0,n.jsx)(i.li,{children:"The rest will be arranged on demand"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["Pages layer \u2014 each page is a separate slice","\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"ui"}),"  will contain the page itself and all of its parts"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"api"}),"  will contain more specialized data fetching, using ",(0,n.jsx)(i.code,{children:"shared/api"})]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"model"}),"  might contain client-side storage of the data that we will display"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Let\u2019s get building!"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.em,{children:"To be continued."})})]})}function h(e={}){const{wrapper:i}={...(0,s.ah)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8002:(e,i,t)=>{t.d(i,{Z:()=>n});const n=t.p+"assets/images/realworld-editor-authenticated-10de4d01479270886859e08592045b1e.jpg"},5768:(e,i,t)=>{t.d(i,{Z:()=>n});const n=t.p+"assets/images/realworld-feed-anonymous-8cbba45f488931979f6c8da8968ad685.jpg"},7035:(e,i,t)=>{t.d(i,{Z:()=>n});const n=t.p+"assets/images/realworld-feed-authenticated-15427d9ff7baae009b47b501bee6c059.jpg"},6736:(e,i,t)=>{t.d(i,{ah:()=>a});var n=t(959);const s=n.createContext({});function a(e){const i=n.useContext(s);return n.useMemo((()=>"function"==typeof e?e(i):{...i,...e}),[i,e])}}}]);